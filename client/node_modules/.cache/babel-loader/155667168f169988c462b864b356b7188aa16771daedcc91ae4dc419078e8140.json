{"ast":null,"code":"const express=require('express');const serverless=require('serverless-http');const mongoose=require('mongoose');const cors=require('cors');const app=express();app.use(cors());app.use(express.json());let cachedDb=null;async function connectToDatabase(){if(cachedDb){return cachedDb;}try{const db=await mongoose.connect(process.env.MONGODB_URI,{useNewUrlParser:true,useUnifiedTopology:true});cachedDb=db;console.log('MongoDB Connected');return db;}catch(error){console.error('MongoDB connection error:',error);throw error;}}// Import your models\nconst Project=require('../../server/models/project');const Skill=require('../../server/models/Skill');const Contact=require('../../server/models/Contact');// Routes\napp.get('/api',(req,res)=>{res.json({message:'API is working!'});});app.get('/api/projects',async(req,res)=>{try{await connectToDatabase();const projects=await Project.find();res.json(projects);}catch(error){res.status(500).json({error:error.message});}});app.get('/api/skills',async(req,res)=>{try{await connectToDatabase();const skills=await Skill.find();res.json(skills);}catch(error){res.status(500).json({error:error.message});}});app.post('/api/contact',async(req,res)=>{try{await connectToDatabase();const{name,email,message}=req.body;const contact=new Contact({name,email,message});await contact.save();res.json({message:'Contact form submitted successfully',contact});}catch(error){res.status(500).json({error:error.message});}});exports.handler=serverless(app);","map":{"version":3,"names":["express","require","serverless","mongoose","cors","app","use","json","cachedDb","connectToDatabase","db","connect","process","env","MONGODB_URI","useNewUrlParser","useUnifiedTopology","console","log","error","Project","Skill","Contact","get","req","res","message","projects","find","status","skills","post","name","email","body","contact","save","exports","handler"],"sources":["C:/Users/NDICHU/portifolio/protifolio/client/src/utils/api.js"],"sourcesContent":["const express = require('express');\r\nconst serverless = require('serverless-http');\r\nconst mongoose = require('mongoose');\r\nconst cors = require('cors');\r\n\r\nconst app = express();\r\n\r\napp.use(cors());\r\napp.use(express.json());\r\n\r\nlet cachedDb = null;\r\n\r\nasync function connectToDatabase() {\r\n  if (cachedDb) {\r\n    return cachedDb;\r\n  }\r\n  \r\n  try {\r\n    const db = await mongoose.connect(process.env.MONGODB_URI, {\r\n      useNewUrlParser: true,\r\n      useUnifiedTopology: true,\r\n    });\r\n    cachedDb = db;\r\n    console.log('MongoDB Connected');\r\n    return db;\r\n  } catch (error) {\r\n    console.error('MongoDB connection error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Import your models\r\nconst Project = require('../../server/models/project');\r\nconst Skill = require('../../server/models/Skill');\r\nconst Contact = require('../../server/models/Contact');\r\n\r\n// Routes\r\napp.get('/api', (req, res) => {\r\n  res.json({ message: 'API is working!' });\r\n});\r\n\r\napp.get('/api/projects', async (req, res) => {\r\n  try {\r\n    await connectToDatabase();\r\n    const projects = await Project.find();\r\n    res.json(projects);\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\napp.get('/api/skills', async (req, res) => {\r\n  try {\r\n    await connectToDatabase();\r\n    const skills = await Skill.find();\r\n    res.json(skills);\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\napp.post('/api/contact', async (req, res) => {\r\n  try {\r\n    await connectToDatabase();\r\n    const { name, email, message } = req.body;\r\n    const contact = new Contact({ name, email, message });\r\n    await contact.save();\r\n    res.json({ message: 'Contact form submitted successfully', contact });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\nexports.handler = serverless(app);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}